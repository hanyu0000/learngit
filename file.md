# FILE(read,write,open函数)

`文件描述符`(通常定义为fd)可以被看作是操作系统为了管理打开的文件或设备而分配的一个标识符。它是一个非负整数值，用于标识一个特定的文件或设备。可以通过它们访问打开的设备或者文件。操作系统会使用一个文件描述符表来记录所有打开的文件或设备的信息，包括文件的位置、读写权限等。当你使用文件描述符进行操作时，操作系统会根据文件描述符找到对应的文件信息，并执行相应的操作。

当一个程序开始运行的时，它一般会有3个已经打开的文件描述符：

- 0：`标准输入`

标准输入（Standard Input，STDIN）：标准输入文件描述符，通常用整数值0表示；在C语言中，可以使用宏定义STDIN_FILENO来表示标准输入。它用于接收用户的输入，比如键盘输入。

- 1：`标准输出`

标准输出（Standard Output，STDOUT）：通常用整数值1来表示。在C语言中，可以使用宏定义STDOUT_FILENO来表示标准输出。它用于向屏幕或终端输出信息。

- 2：`标准错误`

标准错误(Stabdard Error，STDERR)：通常用整数值2来表示。在C语言中，可以使用宏定义STDERR_FILENO来表示标准错误。它用于接收用户的输入，比如键盘输入。

#
在操作系统中，系统调用是用户程序与操作系统之间进行交互的重要方式。其中，read和write函数是常用的系统调用函数，用于在用户程序和操作系统之间进行数据的读取和写入。

### `read`

函数用于从文件描述符中读取数据，并将数据存储到缓冲区中。

其函数原型如下：

> ssize_t read(int fd, void *buf, size_t count);


其中，fd是文件描述符，buf是存放读取数据的缓冲区，count是要读取的字节数。

read函数返回实际读取的字节数，如果返回 -1 表示读取失败。

### `write`

函数用于将数据从缓冲区写入到文件描述符中。

其函数原型如下：

> ssize_t write(int fd, const void *buf, size_t count);

其中，fd是文件描述符，buf是存放待写入数据的缓冲区，count是要写入的字节数。

write函数返回实际写入的字节数，如果返回 -1 表示写入失败。

### `Open`

函数用于创建文件描述符。

> int open(const char *pathname, int flags, mode_t mode);


简单来说：open建立了一条到文件或者设备的访问路径。如果调用成功，它将返回一个可以被read和write等其他系统调用使用的文件描述符。这个文件描述符是唯一的。它不会与任何其他运行中的进程共享。如果两个进程同时打开一个文件，他们会分别得到两个不同的文件描述符。如果他们都对文件进行写操作，那么他们会各写各的，它们分别接着自己上次离开的位置继续往下写，数据不会交织在一起，而是会彼此覆盖。

Open函数成功返回一个新的描述符，它是一个非负整数，通常是还没有使用的最小的数，失败时候返回-1。